<script>
    document.addEventListener("DOMContentLoaded", function() {
        const now = new Date();
        const selection = (now.getDay() * 24 + now.getHours()) % 16;
        const elements = document.getElementsByClassName('secret_spell');
        let visible_count = 0;

        for (let el of elements) {
            const hash = Math.abs(generateHash(el.textContent.trim())) % 16;
            console.log(hash, selection);
            if (hash === selection) {
                el.parentNode.style.display = 'list-item';
                visible_count++;
            } else {
                el.parentNode.style.display = 'none';
            }
        }
        
        for (let el of document.getElementsByClassName("secret_header")){
            el.style.display = visible_count > 0 ? 'block' : 'none';
        }

    });

    function generateHash(text) {
        let hash = 0;
        if (text.length === 0) return hash;

        for (let i = 0; i < text.length; i++) {
            const chr = text.charCodeAt(i);
            hash = ((hash << 5) - hash) + chr;
            hash |= 0;
        }
        return hash;
    }
</script>